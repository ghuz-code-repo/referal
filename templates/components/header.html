<!-- filepath: c:\Users\d.tolkunov\CodeRepository\AnalyticsRepo\referal\templates\components\header.html -->
<header class="header">
    <div class="header_name">
        <img src="{{ url_for('static', filename='img/logo-light.svg')}}" 
             alt="Golden House Logo" 
             class="logo" 
             id="dynamic-logo"
             data-light-logo="{{ url_for('static', filename='img/logo-dark.svg') }}"
             data-dark-logo="{{ url_for('static', filename='img/logo-light.svg') }}">
    </div>
    
    <!-- Кнопка гамбургер для мобильной версии -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>
    
    <nav class="nav" id="mobileNav">
        <ul class="nav__list">
            {% if request.path != '/' and current_user and current_user.role == 'referer' %}
            <li class="nav__item">
                <a href="{{ url_for('referal.profile') }}" class="nav__link"><i class="fas fa-users"></i>Мои рефералы</a>
            </li>
            {% endif %}
            {% if current_user and request.path != '/profile' %}
            <li class="nav__item">
                <a href="{{ url_for('user.user_profile') }}" class="nav__link"><i class="fas fa-user"></i>Мой профиль</a>
            </li>
            {% endif %}
            {% if current_user and (current_user.role=='admin' or current_user.role=='manager' or current_user.role=='call-center') and request.path != '/admin' %}
            <li class="nav__item">
                <a href="{{ url_for('admin.admin_panel') }}" class="nav__link">Управление рефералами</a>
            </li>
            {% endif %}
            <li class="nav__item">
                <a href="/menu" class="nav__link"><i class="fas fa-th-list"></i> Меню сервисов</a>
            </li>
            <!-- Переключатель темы будет добавлен автоматически через JavaScript -->
        </ul>
    </nav>
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const mobileNav = document.getElementById('mobileNav');
    
    if (mobileMenuToggle && mobileNav) {
        mobileMenuToggle.addEventListener('click', function() {
            // Переключаем класс active у кнопки
            mobileMenuToggle.classList.toggle('active');
            
            // Переключаем класс active у навигации
            mobileNav.classList.toggle('active');
        });
        
        // Закрываем меню при клике на ссылку
        const navLinks = mobileNav.querySelectorAll('.nav__link');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                mobileMenuToggle.classList.remove('active');
                mobileNav.classList.remove('active');
            });
        });
        
        // Закрываем меню при клике вне его
        document.addEventListener('click', function(event) {
            if (!mobileMenuToggle.contains(event.target) && !mobileNav.contains(event.target)) {
                mobileMenuToggle.classList.remove('active');
                mobileNav.classList.remove('active');
            }
        });
    }
});
</script>